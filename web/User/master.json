{
  "data": {
    "servers": {}
  },
  "exp_mgmt": {
    "any_loaded": false,
    "authenticated": false,
    "current_manager": "",
    "experiment": "",
    "experiments": {},
    "incomp_process": false,
    "pipe_position": 0,
    "pipe_direction": "",
    "versions": []
  },
  "github": {
    "organization": "",
    "repository": "",
    "organizations": {}
  },
  "mods": {},
  "surveys": {
    "preview": false,
    "user_surveys": {},
    "default_surveys": {
      "autism_quotient.csv": [
        [
          "item_name",
          "text",
          "Type",
          "Answers",
          "Values",
          "Score: AQ_Test",
          "Score: Social_Skill",
          "Score: Attention_switching",
          "Score: Communication",
          "Score: Imagination",
          "Score: Attention_to_detail",
          "Optional",
          "btn_width"
        ],
        [
          "Instructions1",
          "<span style='color:#006699'><span style='font-size:20px'>Choose one response that best describes how strongly each item applies to you:</span></span>",
          "Instruct",
          "",
          "",
          "",
          "",
          "",
          "",
          "",
          "",
          "",
          ""
        ],
        [
          "AQ1",
          "I prefer to do things with others rather than on my own.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "r1",
          "",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ2",
          "I prefer to do things the same way over and over again.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "1",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ3",
          "If I try to imagine something, I find it very easy to create a picture in my mind.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "",
          "r1",
          "",
          "No",
          "100px"
        ],
        [
          "AQ4",
          "I frequently get so strongly absorbed in one thing that I lose sight of other things.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "1",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ5",
          "I often notice small sounds when others do not.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "",
          "",
          "1",
          "No",
          "100px"
        ],
        [
          "AQ6",
          "I usually notice car number plates or similar strings of information.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "",
          "",
          "1",
          "No",
          "100px"
        ],
        [
          "AQ7",
          "Other people frequently tell me that what I've said is impolite, even though I think it is polite.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "1",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ8",
          "When I'm reading a story, I can easily imagine what the characters might look like.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "",
          "r1",
          "",
          "No",
          "100px"
        ],
        [
          "AQ9",
          "I am fascinated by dates.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "",
          "",
          "1",
          "No",
          "100px"
        ],
        [
          "AQ10",
          "In a social group, I can easily keep track of several different people's conversations.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "r1",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ11",
          "I find social situations easy.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "r1",
          "",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ12",
          "I tend to notice details that others do not.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "",
          "",
          "1",
          "No",
          "100px"
        ],
        [
          "AQ13",
          "I would rather go to a library than a party.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "1",
          "",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ14",
          "I find making up stories easy.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "",
          "r1",
          "",
          "No",
          "100px"
        ],
        [
          "AQ15",
          "I find myself drawn more strongly to people than to things.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "r1",
          "",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ16",
          "I tend to have very strong interests which I get upset about if I can't pursue.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "1",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ17",
          "I enjoy social chit-chat.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "r1",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ18",
          "When I talk, it isn't always easy for others to get a word in edgeways.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "1",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ19",
          "I am fascinated by numbers.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "",
          "",
          "1",
          "No",
          "100px"
        ],
        [
          "AQ20",
          "When I'm reading a story, I find it difficult to work out the characters' intentions.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "",
          "1",
          "",
          "No",
          "100px"
        ],
        [
          "AQ21",
          "I don't particularly enjoy reading fiction.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "",
          "1",
          "",
          "No",
          "100px"
        ],
        [
          "AQ22",
          "I find it hard to make new friends.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "1",
          "",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ23",
          "I notice patterns in things all the time.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "",
          "",
          "1",
          "No",
          "100px"
        ],
        [
          "AQ24",
          "I would rather go to the theatre than a museum.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "",
          "r1",
          "",
          "No",
          "100px"
        ],
        [
          "AQ25",
          "It does not upset me if my daily routine is disturbed.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "r1",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ26",
          "I frequently find that I don't know how to keep a conversation going.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "1",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ27",
          "I find it easy to 'read between the lines' when someone is talking to me.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "r1",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ28",
          "I usually concentrate more on the whole picture, rather than the small details.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "",
          "",
          "r1",
          "No",
          "100px"
        ],
        [
          "AQ29",
          "I am not very good at remembering phone numbers.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "",
          "",
          "r1",
          "No",
          "100px"
        ],
        [
          "AQ30",
          "I don't usually notice small changes in a situation, or a person's appearance.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "",
          "",
          "r1",
          "No",
          "100px"
        ],
        [
          "AQ31",
          "I know how to tell if someone listening to me is getting bored.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "r1",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ32",
          "I find it easy to do more than one thing at once.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "r1",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ33",
          "When I talk on the phone, I'm not sure when it's my turn to speak.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "1",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ34",
          "I enjoy doing things spontaneously.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "r1",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ35",
          "I am often the last to understand the point of a joke.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "1",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ36",
          "I find it easy to work out what someone is thinking or feeling just by looking at their face.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "r1",
          "",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ37",
          "If there is an interruption, I can switch back to what I was doing very quickly.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "r1",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ38",
          "I am good at social chit-chat.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "r1",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ39",
          "People often tell me that I keep going on and on about the same thing.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "1",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ40",
          "When I was young, I used to enjoy playing games involving pretending with other children.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "",
          "r1",
          "",
          "No",
          "100px"
        ],
        [
          "AQ41",
          "I like to collect information about categories of things (e.g. types of car, types of bird, types of train, types of plant, etc.).",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "",
          "1",
          "",
          "No",
          "100px"
        ],
        [
          "AQ42",
          "I find it difficult to imagine what it would be like to be someone else.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "",
          "",
          "1",
          "",
          "No",
          "100px"
        ],
        [
          "AQ43",
          "I like to plan any activities I participate in carefully.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "1",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ44",
          "I enjoy social occasions.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "r1",
          "",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ45",
          "I find it difficult to work out people's intentions.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "1",
          "",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ46",
          "New situations make me anxious.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "1",
          "",
          "1",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ47",
          "I enjoy meeting new people.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "r1",
          "",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ48",
          "I am a good diplomat.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "r1",
          "",
          "",
          "",
          "",
          "No",
          "100px"
        ],
        [
          "AQ49",
          "I am not very good at remembering people's date of birth.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "",
          "",
          "r1",
          "No",
          "100px"
        ],
        [
          "AQ50",
          "I find it very easy to play games with children that involve pretending.",
          "likert",
          "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
          "1|1|0|0",
          "r1",
          "",
          "",
          "",
          "r1",
          "",
          "No",
          "100px"
        ],
        [
          ""
        ]
      ],
      "demographics.csv": [
        [
          "item_name",
          "text",
          "Type",
          "Answers",
          "Optional",
          "Values",
          "side_by_side",
          "btn_width"
        ],
        [
          "Gender",
          "Gender",
          "likert",
          "Male|Female|Other",
          "No",
          "",
          "yes",
          "100px"
        ],
        [
          "Age",
          "Age",
          "Number",
          "",
          "No",
          "",
          "",
          ""
        ],
        [
          "Education",
          "Education (which level are you currently in, or is the highest you've completed)",
          "Dropdown",
          "Some high school| High school graduate| Some college, no degree| Associate's degree| Bachelor's degree|Graduate degree (Master's, Doctorate, etc.)",
          "No",
          "",
          "",
          ""
        ],
        [
          "English_Fluency",
          "Do you speak English fluently?",
          "likert",
          "Yes|No",
          "No",
          "",
          "yes",
          "200px"
        ],
        [
          "English_Age",
          "At what age did you start learning English? (write \"0\" if from birth)",
          "Number",
          "",
          "No",
          "",
          "",
          ""
        ],
        [
          "Country",
          "What is your country of residence?",
          "Text",
          "",
          "No",
          "",
          "",
          ""
        ],
        [
          "Handedness",
          "What is your preferred hand?",
          "Likert",
          "Left|Right|Both",
          "No",
          "",
          "yes",
          "100px"
        ],
        [
          "ethnicity",
          "If you would like to please state your ethnicity",
          "Text",
          "",
          "Yes",
          "",
          "",
          ""
        ],
        [
          ""
        ]
      ],
      "empathy_quotient_40.csv": [
        [
          "item_name",
          "text",
          "Type",
          "Answers",
          "Values",
          "Score: EQ_Test",
          "Score: Cognitive",
          "Score: Social_Skills",
          "Score: Emotional_Reactivity",
          "optional"
        ],
        [
          "Instructions1",
          "Choose one response that best describes how strongly each item applies to you:",
          "Instruct",
          "",
          "",
          "",
          "",
          "",
          "",
          ""
        ],
        [
          "EQ1",
          "I can easily tell if someone else wants to enter a conversation.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "1",
          "",
          "",
          "no"
        ],
        [
          "EQ4",
          "I find it difficult to explain to others things that I understand easily, when they don’t understand it the first time.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "r1",
          "",
          "no"
        ],
        [
          "EQ6",
          "I really enjoy caring for other people.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "",
          "",
          "1",
          "no"
        ],
        [
          "EQ8",
          "I find it hard to know what to do in a social situation.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "r1",
          "",
          "no"
        ],
        [
          "EQ10",
          "People often tell me that I went too far in driving my point home in a discussion.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "",
          "",
          "no"
        ],
        [
          "EQ11",
          "It doesn’t bother me too much if I am late meeting a friend.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "",
          "",
          "no"
        ],
        [
          "EQ12",
          "Friendships and relationships are just too difficult, so I tend not to bother with them.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "r1",
          "",
          "no"
        ],
        [
          "EQ14",
          "I often find it difficult to judge if something is rude or polite.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "r1",
          "",
          "no"
        ],
        [
          "EQ15",
          "In a conversation, I tend to focus on my own thoughts rather than on what my listener might be thinking.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "",
          "",
          "no"
        ],
        [
          "EQ18",
          "When I was a child, I enjoyed cutting up worms to see what would happen.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "",
          "",
          "no"
        ],
        [
          "EQ19",
          "I can pick up quickly if someone says one thing but means another.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "1",
          "",
          "",
          "no"
        ],
        [
          "EQ21",
          "It is hard for me to see why some things upset people so much.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "",
          "r1",
          "no"
        ],
        [
          "EQ22",
          "I find it easy to put myself in somebody else’s shoes.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "",
          "",
          "1",
          "no"
        ],
        [
          "EQ25",
          "I am good at predicting how someone will feel.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "1",
          "",
          "",
          "no"
        ],
        [
          "EQ26",
          "I am quick to spot when someone in a group is feeling awkward or uncomfortable.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "1",
          "",
          "",
          "no"
        ],
        [
          "EQ27",
          "If I say something that someone else is offended by, I think that that’s their problem, not mine.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "",
          "r1",
          "no"
        ],
        [
          "EQ28",
          "If anyone asked me if I liked their haircut, I would reply truthfully, even if I didn’t like it.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "",
          "",
          "no"
        ],
        [
          "EQ29",
          "I can’t always see why someone should have felt offended by a remark.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "",
          "r1",
          "no"
        ],
        [
          "EQ32",
          "Seeing people cry doesn’t really upset me.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "",
          "r1",
          "no"
        ],
        [
          "EQ34",
          "I am very blunt, which some people take to be rudeness, even though this is unintentional.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "",
          "",
          "no"
        ],
        [
          "EQ35",
          "I do not tend to find social situations confusing.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "",
          "1",
          "",
          "no"
        ],
        [
          "EQ36",
          "Other people tell me I am good at understanding how they are feeling and what they are thinking.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "1",
          "",
          "",
          "no"
        ],
        [
          "EQ37",
          "When I talk to people, I tend to talk about their experiences rather than my own.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "",
          "",
          "",
          "no"
        ],
        [
          "EQ38",
          "It upsets me to see an animal in pain.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "",
          "",
          "",
          "no"
        ],
        [
          "EQ39",
          "I am able to make decisions without being influenced by people’s feelings.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "",
          "",
          "no"
        ],
        [
          "EQ41",
          "I can easily tell if someone else is interested or bored with what I am saying.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "1",
          "",
          "",
          "no"
        ],
        [
          "EQ42",
          "I get upset if I see people suffering on news programs.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "",
          "",
          "1",
          "no"
        ],
        [
          "EQ43",
          "Friends usually talk to me about their problems as they say that I am very understanding.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "",
          "",
          "1",
          "no"
        ],
        [
          "EQ44",
          "I can sense if I am intruding, even if the other person doesn’t tell me.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "1",
          "",
          "",
          "no"
        ],
        [
          "EQ46",
          "People sometimes tell me that I have gone too far with teasing.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "",
          "",
          "no"
        ],
        [
          "EQ48",
          "Other people often say that I am insensitive, though I don’t always see why.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "",
          "r1",
          "no"
        ],
        [
          "EQ49",
          "If I see a stranger in a group, I think that it is up to them to make an effort to join in.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "",
          "",
          "no"
        ],
        [
          "EQ50",
          "I usually stay emotionally detached when watching a film.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "r1",
          "",
          "",
          "r1",
          "no"
        ],
        [
          "EQ52",
          "I can tune into how someone else feels rapidly and intuitively.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "1",
          "",
          "",
          "no"
        ],
        [
          "EQ54",
          "I can easily work out what another person might want to talk about.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "1",
          "",
          "",
          "no"
        ],
        [
          "EQ55",
          "I can tell if someone is masking their true emotion.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "1",
          "",
          "",
          "no"
        ],
        [
          "EQ57",
          "I don’t consciously work out the rules of social situations.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "",
          "1",
          "",
          "no"
        ],
        [
          "EQ58",
          "I am good at predicting what someone will do.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "1",
          "",
          "",
          "no"
        ],
        [
          "EQ59",
          "I tend to get emotionally involved with a friend’s problems.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "",
          "",
          "1",
          "no"
        ],
        [
          "EQ60",
          "I can usually appreciate the other person’s viewpoint, even if I don’t agree with it.",
          "likert",
          "Strongly agree|Slightly agree|Slightly disagree|Strongly disagree",
          "2|1|0|0",
          "1",
          "",
          "",
          "",
          "no"
        ],
        [
          ""
        ]
      ],
      "info_sheet.csv": [
        [
          "item_name",
          "text",
          "Type",
          "Answers",
          "Values",
          "Optional",
          "side_by_side"
        ],
        [
          "Instructions1",
          "<h1>PARTICIPANT INFORMATION SHEET </h1>\n\n<h2>Title of Project:  <u><span style='color:#f20707'>[[Your project title]]</span></u>.</h2>\n\n<h3>Name of Lead Investigator:  <span style='color:#f20707'>[[Investigator]]</span> ([[<span style='color:#f20707'>Institute</span>]]) </h3>\n\n<h4>Invitation paragraph</h4>\nYou have been invited to take part in a research study.  Before you decide whether to take part it is important for you to understand why the research is being done and what it will involve.  Please take time to read the following information carefully and discuss it with friends and relatives if you wish to. Ask us if there is anything that is not clear or if you would like more information. Take time to decide whether you wish to take part or not.  Thank you for reading this.<br><br>\n\n<h4>What is the study about?</h4>\n<span style='color:#f20707'>[[describe your experiment here]]</span>.<br><br>\n\n<h4>What does the study involve?</h4>\n<span style='color:#f20707'>[[what the participant will do]]</span> <br><br>\n\n<h4>Why have I been chosen?</h4>\n<span style='color:#f20707'>[[criterion, e.g. age, etc.]]</span>  <br><br>\n\n<h4>Do I have to take part?</h4>\nIt is up to you to decide whether or not to take part.  If you do decide to take part you will be given this information sheet to keep and be asked to sign a consent form.  If you decide to take part you are still free to withdraw at any time during the data collection without giving a reason.<br><br>\n\n<h4>I am interested in taking part, what do I do next?</h4>\nPlease find a quiet room with minimal distractions. Please ensure you have a good internet connection on a PC / laptop / tablet device. <span style='color:#070ff2'>[[optional: Please do not run the study on a mobile phone]]</span>. Make sure that you have about <span style='color:#f20707'>[[time needed]]</span> minutes time to complete the study. Once ready please follow the link to the online study.<br><br>\n\n<h4>What if I agree to take part and then change my mind?</h4>\nThat is fine. If you decide to withdraw you would need to provide your participation ID to the researchers. The researcher will then delete all the data generated by that ID from their computers. <br><br>\n\n<h4>What are the possible disadvantages and risks of taking part?</h4>\n <span style='color:#f20707'>[[describe risks etc. here]]</span><br><br>\n\n<h4>What are the possible benefits of taking part? </h4>\n<span style='color:#f20707'>[[benefits here]]</span> <br><br>\n\n<h4>Who can I complain to?</h4>\nIf you have a complaint regarding anything to do with this study, you can initially approach the lead investigator <span style='color:#f20707'>[[lead investigator]]</span> (<span style='color:#f20707'>[[lead_investigator_email]]</span>).  If this achieves no satisfactory outcome, you should then contact <span style='color:#f20707'>[[person to contact next]]</span><br><br>\n\n<h4>Will my taking part in this study be kept confidential?</h4>\nAll information which is collected about you during the course of the research will be kept on a password protected database and is strictly confidential. You will be given an ID code which will be used instead of your name. Your data will be shared with the following collaborators: <br> <span style='color:#f20707'>[[list of collaborators]]</span>\n<br><br>\n\n<span style='color:#070ff2'>[[optional: Your anonymised data can be shared with other research teams interested in understating it further.]]</span><br>\nThe raw data will be stored for up to 10 years after a study has been completed.<br> Members of the faculty human research ethics committee may require access to check that the study has been conducted in accordance with the approval. <br>\n\n\n<h4>What will happen to the results of the research study?</h4>\nThe results based on performance of the group of participants will be then analysed and submitted for publication in peer reviewed scientific journals. <br><br>\n\n<h4>Who is organising and funding the research?</h4>\n<br><br><span style='color:#f20707'>[[information about researchers and funders here]]</span>\n\n<h4>Who has reviewed the study?</h4>\nThis study has been reviewed and approved by <span style='color:#f20707'>[[your ethics committee]]</span>.<br><br>\n<br>\n<h4>How is data secured?</h4>\nData is encrypted in Collector on the participant's computer. This data cannot be decrypted without the researcher's password. For more information, go to: <a target=\"_blank\" href=\"https://some-open-solutions.github.io/collector/encryption.html\">https://some-open-solutions.github.io/collector/encryption.html</a>\n<h4>Contact for Further Information</h4>\n<span style='color:#f20707'>[[your contact information]]</span>",
          "Instruct",
          "",
          "",
          "",
          ""
        ],
        [
          "Info_Accept",
          "I understand these instructions and am happy to continue",
          "likert",
          "Agree",
          "1",
          "No",
          "yes"
        ],
        [
          ""
        ]
      ]
    }
  },
  "trialtypes": {
    "default_trialtypes": {
      "text": "<!--\n/*  Collector (Garcia, Kornell, Kerr, Blake & Haffey)\n    A program for running experiments on the web\n    Copyright 2012-2016 Mikey Garcia & Nate Kornell\n\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License version 3 as published by\n    the Free Software Foundation.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>\n \t\t\n\t\tKitten/Cat release (2019-21) author: Dr. Anthony Haffey (team@someopen.solutions)\t\t\n*/\n-->\n{{text}}",
      "survey": "<!--\r\n  Author: Dr. Anthony Haffey\r\n\r\n  Collector: Cat/Kitten/Cat release\r\n  A program for running experiments on the web\r\n  Copyright 2012-2018 Mikey Garcia & Nate Kornell\r\n\r\n\r\n  This program is free software: you can redistribute it and/or modify\r\n  it under the terms of the GNU General Public License version 3 as published by\r\n  the Free Software Foundation.\r\n\r\n  This program is distributed in the hope that it will be useful,\r\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n  GNU General Public License for more details.\r\n\r\n  You should have received a copy of the GNU General Public License\r\n  along with this program.  If not, see <http://www.gnu.org/licenses/>\r\n\r\n  Kitten/Cat release (2019-2021) author: Dr. Anthony Haffey (team@someopen.solutions)\r\n-->\r\n<style>\r\nbody{\r\n  background-color:#5F9EA0;\r\n  width:100%;\r\n  height:100%;\r\n}\r\ntd{\r\n  padding:10px;\r\n  vertical-align: top;\r\n}\r\n\r\n/*\r\n*\telements by id\r\n*/\r\n\r\n#content{\r\n  width:95%;\r\n}\r\n#proceed_button{\r\n  display:none;\r\n  float:right;\r\n}\r\n#this_survey_id{\r\n  padding:            20px;\r\n  display:            none;\r\n}\r\n#survey_outline{\r\n\tposition: \t\t\t\t\tfixed;\r\n  top: \t\t\t\t\t\t\t\t50%;\r\n  left: \t\t\t\t\t\t\t50%;\r\n\theight: \t\t\t\t\t\t90%;\r\n\toverflow: \t\t\t\t\tauto;\r\n\t-webkit-transform: \ttranslate(-50%, -50%);\r\n  transform: \t\t\t\t\ttranslate(-50%, -50%);\r\n  background-color: \twhite;\r\n\tmin-width:        \t900px;\r\n\tmax-width:        \t9000px;\r\n\tborder-radius:    \t20px;\r\n  border-color:     \t#069;\r\n  border-style:     \tsolid;\r\n  border-width:     \t5px;\r\n\tpadding:            10px;\r\n}\r\n#survey_tabs{\r\n  padding:            20px;\r\n}\r\n\r\n\r\n/*\r\n*\telements by class\r\n*/\r\n.feedback_span_multiple{\r\n  display: none;\r\n  margin:  10px;\r\n}\r\n.feedback_span_single{\r\n  display: none;\r\n  padding: 10px;\r\n}\r\n.likert_table td{\r\n  padding:    1px;\r\n  text-align: center;\r\n}\r\n.likert_table td:hover{\r\n  color: blue;\r\n}\r\n.score_total{\r\n  display: none;\r\n}\r\n.show_tab{\r\n  margin: 5px;\r\n}\r\n.survey_btn{\r\n\twhite-space: normal;\r\n\tword-wrap: \t initial;\r\n}\r\n.table_break{\r\n\twidth:    100%;\r\n\theight:   300px;\r\n\toverflow: auto;\r\n}\r\n\r\n\r\n/*\r\n* by Bora Alp Arat at https://stackoverflow.com/questions/21684101/css-vertical-scrollbar-padding-left-right-in-ul-possible\r\n*/\r\n::-webkit-scrollbar {\r\n  width: 14px;\r\n  height: 18px;\r\n}\r\n::-webkit-scrollbar-thumb {\r\n  height: 6px;\r\n  border: 4px solid rgba(0, 0, 0, 0);\r\n  background-clip: padding-box;\r\n\t-webkit-border-radius: 7px;\r\n  background-color: rgba(0, 102, 153, 0.5);\r\n  -webkit-box-shadow: inset -1px -1px 0px rgba(0, 0, 0, 0.05), inset 1px 1px 0px rgba(0, 0, 0, 0.05);\r\n}\r\n::-webkit-scrollbar-button {\r\n  width: 0;\r\n  height: 0;\r\n  display: none;\r\n}\r\n::-webkit-scrollbar-corner {\r\n  background-color: transparent;\r\n}\r\n</style>\r\n<div id=\"everything\">\r\n\t<div id=\"survey_outline\"></div>\r\n</div>\r\n<script>\r\n/////////////////////////\r\n// Retrieving settings //\r\n/////////////////////////\r\n\r\nif(typeof(settings) !== \"undefined\"){\r\n  settings = [settings];\r\n} else {\r\n  settings = {};\r\n}\r\n\r\n//////////////////////////////////\r\n// vertical vs. horizontal tabs //\r\n//////////////////////////////////\r\n\r\nif(typeof(settings.tab_hor_vert) == \"undefined\" || settings.tab_hor_vert.toLowerCase() == \"horizontal\"){\r\n  settings.tab_hor_vert = \"horizontal\";\r\n  $(\"#survey_outline\").html(  '<div id=\"please_wait_div\">Loading... Please wait</div>'+\r\n                              '<div id=\"this_survey_id\" class=\"needs-validation\" novalidate></div>'+\r\n                              '<div id=\"survey_tabs\" style=\"text-align:right\" class=\"border-top border-primary\"></div><input type=\"submit\" value=\"Proceed\" class=\"btn btn-primary\" id=\"proceed_button\">');\r\n\r\n} else if (settings.tab_hor_vert.toLowerCase() == \"vertical\"){\r\n  $(\"#survey_outline\").html( '<table>'+\r\n                                '<tr>'+\r\n                                  '<td valign=\"top\" class=\"border-right border-primary\">'+\r\n                                    '<div id=\"survey_tabs\"></div></td>' +\r\n                                  '<td>'+\r\n                                    '<div id=\"please_wait_div\">Please wait while survey is downloading</div>'+\r\n                                    '<div id=\"this_survey_id\" class=\"needs-validation\" novalidate></div>' +\r\n                                    '<input type=\"button\" value=\"Proceed\" class=\"btn btn-primary\" id=\"proceed_button\">'+\r\n                                  '</td>'+\r\n                                '</tr>'+\r\n                              '</table>');\r\n} else if(settings.tab_hor_vert.toLowerCase() == \"none\"){\r\n  $(\"#survey_outline\").html(  '<div id=\"survey_tabs\" style=\"display:none\"></div>' +\r\n                              '<div id=\"please_wait_div\">Please wait while survey is downloading</div>'+\r\n                              '<div id=\"this_survey_id\" class=\"needs-validation\" novalidate></div>');\r\n} else {\r\n  bootbox.alert(\"If you are the researcher, please check the 'settings for this survey. The input for 'tab_hor_vert' appears to be invalid. Please change it to 'horizontal' or 'vertical' or 'none' or remove 'tab_hot_vert' altogether from the settings, which will make the tabs invisible\");\r\n}\r\n</script>\r\n\r\n<span id=\"scales_span\"></span>\r\n\r\n<script>\r\n\r\n//////////////////////\r\n// Defining objects //\r\n//////////////////////\r\n\r\npage_break_management = {\r\n  breaks_remaining : 0,\r\n  breaks_index     : 0\r\n}\r\n\r\nproceed_object = {\r\n  type:[],\r\n  name:[],\r\n  break_no:[]\r\n};\r\n\r\nscoring_object={\r\n  scales:[],\r\n  scale_scores:[],\r\n  update_scales:function(this_survey){\r\n    headers = Object.keys(this_survey[0]);\r\n    this.scales = headers.filter(elm => elm.includes(\"score:\"));\r\n    var scales_html = '';\r\n    this.scales.forEach(function(element){\r\n      element = element.replace(\": \",\":\");\r\n      scales_html += \"<input name='\"+element.replace(/ |:/g,\"_\")+\"' class='score_total \"+element.replace(/ |:/g,\"_\")+\"' disabled>\";\r\n    });\r\n    $(\"#scales_span\").html(scales_html);\r\n  }\r\n}\r\n\r\nsurvey_obj = {};\r\n\r\n\r\n/////////////////////\r\n// Element actions //\r\n/////////////////////\r\n\r\n/*\r\n$(function() {\r\n  $( \".datepicker\" ).datepicker({\r\n    dateFormat : 'mm/dd/yy',\r\n    changeMonth : true,\r\n    changeYear : true,\r\n    yearRange: '-100y:c+nn',\r\n    maxDate: '-1d'\r\n  });\r\n});\r\n*/\r\n\r\n\r\n$('#ExperimentContainer').css('transform','scale(1,1)');\r\n\r\n$(\"#proceed_button\").on(\"click\",function(){\r\n  var proceed = true;\r\n  var tabs    = document.getElementsByClassName('show_tab active');\r\n  if(tabs.length > 0){\r\n    var current_tab       = document.getElementsByClassName('show_tab active')[0]\r\n                                    .id\r\n                                    .replace(\"_button\", \"\")\r\n                                    .replace(\"tab_\",    \"\");\r\n    var response_elements = $('#table_'+current_tab).find('.response_element');\r\n\r\n  } else {\r\n    response_elements = $(\".table_break:visible\").find(\".response_element\");\r\n  }\r\n\r\n  for(var i = 0; i < response_elements.length; i++){\r\n    [this_row_no,item_name] = retrieve_row_no_item_name(response_elements[i]);\r\n    var this_optional = survey_obj.data[this_row_no].optional.toLowerCase();\r\n\r\n    if(this_optional.indexOf(\"no\") !== -1){\r\n      this_optional = this_optional.split(\"-\");       // find out whether there's a minimal number of responses\r\n      if(this_optional.length == 1){                  // default is that length needs to be at least 1\r\n        var min_resp_length = 1;\r\n      } else if(this_optional.length == 2) {\r\n        var min_resp_length = this_optional[1];\r\n      } else {\r\n        bootbox.alert(\"Error - you appear to have too many '-' characters in the 'optional' column\");\r\n        return false;\r\n      }\r\n    } else {\r\n      min_resp_length = 0;\r\n    }\r\n\r\n\r\n    var quest_resp = isJSON($(\"#\"+response_elements[i].id).val());\r\n    if (quest_resp.length < min_resp_length){\r\n      proceed = false;\r\n\t\t\t$(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).removeClass(\"text-dark\");\r\n      $(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).removeClass(\"text-success\");\r\n      $(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).addClass(\"text-danger\");\r\n    } else {\r\n\t\t\t$(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).removeClass(\"text-dark\");\r\n      $(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).removeClass(\"text-danger\");\r\n      $(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).addClass(\"text-success\");\r\n    }\r\n  }\r\n\r\n  if(current_tab == survey_obj.tabs && proceed){\r\n    if(typeof(sql_surveys) == \"undefined\"){\r\n      //$(\".table_break\");\r\n      var next_table_no = parseFloat($(\".table_break:visible\")[0].id.replace(\"table\",\"\")) + 1;\r\n\r\n      if($(\".table_break#table\"+next_table_no).length == 0){\r\n        if(typeof(Trial) !== \"undefined\"){\r\n          Trial.submit();\r\n        } else {\r\n          bootbox.alert(\"You've finished! Click on the preview button to restart.\")\r\n        }\r\n      } else {\r\n        $(\".table_break\").hide();\r\n        $(\".table_break#table\" + next_table_no).show();\r\n      }\r\n    } else {\r\n      $(\"#survey_outline\").html(\"<h1> You have finished the preview of this survey.</h1>\");\r\n    }\r\n  } else if(current_tab < survey_obj.tabs && proceed) {\r\n    current_tab ++;\r\n    $(\"#tab_\"+current_tab+\"_button\").removeClass(\"btn-secondary\");\r\n    $(\"#tab_\"+current_tab+\"_button\").removeClass(\"disabled\");\r\n    $(\"#tab_\"+current_tab+\"_button\").addClass(\"btn-outline-dark\");\r\n    $(\"#tab_\"+current_tab+\"_button\").click();\r\n  } else if(proceed == false){\r\n    bootbox.alert(\"You have failed to complete at least one compulsory input.\");\r\n  } else if(current_tab > survey_obj.tabs){\r\n    bootbox.alert(\"Error - please contact the Collector team about this problem, error 'Survey_001'.\");\r\n  }\r\n});\r\n\r\n//by qwerty at https://stackoverflow.com/questions/2116558/fastest-method-to-replace-all-instances-of-a-character-in-a-string\r\nString.prototype.replaceAll = function(str1, str2, ignore){\r\n  return this.replace(new RegExp(str1.replace(/([\\/\\,\\!\\\\\\^\\$\\{\\}\\[\\]\\(\\)\\.\\*\\+\\?\\|\\<\\>\\-\\&])/g,\"\\\\$&\"),(ignore?\"gi\":\"g\")),(typeof(str2)==\"string\")?str2.replace(/\\$/g,\"$$$$\"):str2);\r\n}\r\n\r\n\r\n///////////////\r\n// Functions //\r\n///////////////\r\n\r\nfunction clean_item(this_item){\r\n  if(this_item.indexOf(\"'\") !== -1 |\r\n     this_item.indexOf('\"') !== -1){\r\n    bootbox.alert(\"Please avoid apostraphe's or quote marks in the responses the participant can give. These cause problems with smooth running of surveys. This occurs when you wrote:<br><br>\" + this_item);\r\n  }\r\n\r\n  /*\r\n  this_item = this_item.replaceAll(\"'\",\"\")\r\n                       .replaceAll('\"','');\r\n  */\r\n\r\n  return(this_item);\r\n}\r\n\r\nfunction load_survey(survey){\r\n  // are we in preview?\r\n  /////////////////////\r\n  if(typeof(parent.master_json) !== \"undefined\" && parent.master_json.surveys.preview){     // Yes\r\n    survey_content = survey;                                                    // i.e. the content has been passed through directly\r\n    survey_obj.mods = parent.master_json.mods;                                //no need to be efficient in preview\r\n\r\n  } else {                                                                      // No\r\n    survey = survey.toLowerCase().replace(\".csv\",\"\") + \".csv\";\r\n\r\n    if(typeof(parent.parent.exp_json.surveys) !== \"undefined\" &&\r\n       typeof(parent.parent.exp_json.surveys[survey]) !== \"undefined\"){\r\n      survey_content = parent.parent.exp_json.surveys[survey];\r\n      survey_obj.mods = parent.parent.exp_json.mods;                     //take mods from exp_json\r\n\r\n    } else if(typeof(parent.parent.exp_json.surveys) !== \"undefined\" &&\r\n\t\t\t\t\t\t\ttypeof(parent.parent.exp_json.surveys[survey.replace(\".csv\",\"\")])){\r\n\t\t\tsurvey_content = parent.parent.exp_json.surveys[survey.replace(\".csv\",\"\")];\r\n      survey_obj.mods = parent.parent.exp_json.mods;                     //take mods from exp_json\r\n\t\t}\telse {\r\n      bootbox.alert(\"Survey \" + survey  + \" doesn't appear to exist\");\r\n    }\r\n  }\r\n  process_returned_questionnaire(survey_content);\r\n}\r\n\r\nfunction generate_feedback_string(feedback_array,this_index,feedback_color,row_no,this_row){\r\n  if(feedback_array){                 //i.e. if it's not null\r\n    if(feedback_array.length > 1){\r\n      return \"<div class='feedback_span_multiple \"+this_row[\"item_name\"].toLowerCase()+\"_feedback' style='color:\"+feedback_color[this_index]+\"'>\"+feedback_array[this_index]+\"</div>\";\r\n    } else {\r\n      return \"<div class='feedback_span_single \"+this_row[\"item_name\"].toLowerCase()+\"_feedback' style='color:\"+feedback_color[this_index]+\"'>\"+feedback_array[this_index]+\"</div>\";\r\n    }\r\n  } else {\r\n    return \"\";\r\n  }\r\n}\r\n\r\nfunction isJSON(str) {\r\n  try {\r\n    return JSON.parse(str);\r\n  } catch (e) {\r\n    return str;\r\n  }\r\n}\r\n\r\n\r\nfunction likert_update(this_element,this_response,this_value){\r\n  [row_no,item_name] = retrieve_row_no_item_name(this_element);\r\n  $(\".row_\"+row_no).removeClass(\"active\");\r\n  $(\".row_\"+row_no).removeClass(\"btn-primary\");\r\n  $(\".row_\"+row_no).addClass(\"btn-outline-primary\");\r\n  $(this_element).removeClass(\"btn-outline-primary\");\r\n  $(this_element).addClass(\"btn-primary\");\r\n  $(\"#survey_\"+item_name+\"_response\").val(this_response);\r\n  response_check(this_element);\r\n}\r\n\r\n\r\nfunction process_item_score(survey_obj,row_no,values_col,this_response,item,values_reverse){\r\n  item_values       = survey_obj.data[row_no][values_col].split(\"|\");\r\n  if(typeof(values_reverse) !== \"undefined\" && values_reverse == \"r\"){\r\n    item_values.reverse();\r\n  }\r\n  item_answers      = survey_obj.data[row_no][\"answers\"].split(\"|\");\r\n  var this_value    = item_values[item_answers.indexOf(this_response)];\r\n  $(\"#survey_\" + item + \"_score\").val(this_value);\r\n  if(typeof(this_value) !== \"undefined\"){\r\n    return parseFloat(this_value);\r\n  }\r\n}\r\n\r\nfunction process_returned_questionnaire(data){\r\n  survey_obj.data = data;\r\n  survey_obj.data = Papa.parse(Papa.unparse(survey_obj.data),{\r\n                      header:true,\r\n                      beforeFirstChunk: function(chunk) {\r\n                        var rows = chunk.split( /\\r\\n|\\r|\\n/ );\r\n                        var headings = rows[0].toLowerCase();\r\n                        rows[0] = headings;\r\n                        return rows.join(\"\\r\\n\");\r\n                      },\r\n                    }).data;\r\n\r\n  var col_headers = Object.keys(survey_obj.data[0]);\r\n  survey_obj.scales = {};\r\n\r\n  col_headers.forEach(function(header){\r\n    if(header.indexOf(\"score:\")==0){\r\n      var original_header = header;\r\n      header = header.replace(\"score: \",\"\");\r\n      header = header.replace(\"score:\",\"\");\r\n\r\n      survey_obj.scales[header] = {};\r\n      survey_obj.scales[header].questions = {};\r\n\r\n      //identify which questions\r\n      for(var i = 1; i< survey_obj.data.length; i++){\r\n        row = survey_obj.data[i];\r\n        if(row[original_header] !== \"\" && typeof(row[original_header]) !== \"undefined\"){\r\n          survey_obj.scales[header].questions[i] = row[original_header];\r\n        }\r\n      }\r\n    }\r\n  });\r\n  write_survey(survey_obj.data,\"this_survey_id\");\r\n  $(\"#please_wait_div\").hide();\r\n  $(\"#proceed_button\").show();\r\n\r\n  $('html, body').animate({\r\n    scrollTop: $(\"#survey_outline\").offset().top\r\n  }, 1000);\r\n}\r\n\r\nfunction process_survey_question(this_row,row_no){\r\n\r\n  if(this_row.values == \"\"){\r\n    this_row.values = this_row.answers;\r\n  }\r\n\r\n  if(typeof(this_row[\"text\"]) !== \"undefined\" &&\r\n\t\t typeof(this_row[\"type\"]) !== \"undefined\" &&\r\n\t\t this_row['text'].toLowerCase() == \"page_break\" |\r\n\t\t this_row['type'].toLowerCase() == \"page_break\"){\r\n        page_break_management.breaks_remaining++;\r\n        question_td = \"</tr></table><table id='table\" + page_break_management.breaks_remaining + \"' style='display:none' class='table_break'></tr>\";\r\n  } else {\r\n\r\n    if(typeof(this_row[\"values\"]) !== \"undefined\" & typeof(this_row[\"values\"]) !== \"function\"){ //to address microsoft edge issue.\r\n      value_array = this_row[\"values\"].split(\"|\");\r\n    } else {\r\n      value_array='';\r\n    }\r\n\r\n    if(this_row[\"item_name\"].indexOf(\" \") !== -1){\r\n      bootbox.alert(\"Please note that the 'item name' '\" + this_row['item_name'] + \"' is invalid because it has at least one space. Please use underscores instead of spaces. If you're not the creator of this task, please contact the person who created it.\");\r\n    }\r\n\r\n    // class for scoring\r\n    this_class = \"\";\r\n    for(var i=0;i<scoring_object.scales.length;i++){\r\n      if(this_row[scoring_object.scales[i].toLowerCase()]==\"1\"){\r\n        this_class += scoring_object.scales[i].toLowerCase().replace(\"score: \",\"\").replace(/ |-/,\"\")+\" \";\r\n      }\r\n      if(this_row[scoring_object.scales[i].toLowerCase()]==\"r1\"){\r\n        this_class += scoring_object.scales[i].toLowerCase().replace(\"score: \",\"\").replace(\" \",\"_\")+\"-r1 \";\r\n      }\r\n    }\r\n\r\n    [feedback_array,feedback_color] = retrieve_feedback(this_row);\r\n\r\n    response_html = '<input type=\"hidden\" class=\"response_element row_'+row_no+'\" id=\"survey_'+this_row[\"item_name\"].toLowerCase()+'_response\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'_response\"  value=\"\">';\r\n\r\n\r\n    // Survey settings\r\n    ////////////////////\r\n\r\n    [row_ques_perc,row_resp_perc] = quest_resp_perc(this_row[\"question_width\"]);\r\n\r\n    if(typeof(settings.feedback_before_response) == \"undefined\"){\r\n        settings.feedback_before_response = true;\r\n    }\r\n\r\n    if(typeof(settings.lock_after_feedback) == \"undefined\"){\r\n        settings.lock_after_feedback = false;\r\n    }\r\n    var question_td='';\r\n\r\n    if(typeof(this_row[\"type\"]) == \"undefined\"){\r\n        return false;\r\n    }\r\n\r\n    // Item types\r\n    ///////////////\r\n\r\n    if(typeof(survey_obj.mods) !== \"undefined\" &&\r\n\t\t\t typeof(survey_obj.mods[this_row.type]) !== \"undefined\"){\r\n\r\n      var mod_html = survey_obj.mods[this_row.type].contents;\r\n\r\n      //for each row variable, insert it into the mod if possible?\r\n      Object.keys(this_row).forEach(function(attribute){\r\n        mod_html = mod_html.replaceAll(\"{{\"+attribute+\"}}\",this_row[attribute]);\r\n      });\r\n      question_td += mod_html;\r\n    } else {\r\n\r\n      switch(this_row[\"type\"].toLowerCase()){\r\n        case \"page_start\":\r\n          var tabs_html = $(\"#survey_tabs\").html();\r\n          if(settings.tab_hor_vert == \"horizontal\"){\r\n            span_div = \"span\";\r\n          } else if(settings.tab_hor_vert == \"vertical\"){\r\n            span_div = \"div\";\r\n          }\r\n          if(typeof(survey_obj.tabs) == \"undefined\"){\r\n            survey_obj.tabs = 0;\r\n          } else {\r\n            survey_obj.tabs++;\r\n          }\r\n          if(survey_obj.tabs == 0){ //i.e. is the first tab\r\n            active_button = \"btn-outline-primary active\";\r\n          } else {\r\n            active_button = \"btn-secondary disabled\";\r\n          }\r\n          if(settings.tab_hor_vert == \"vertical\"){\r\n            var vert_btn_block = \"btn-block\";\r\n          } else {\r\n            var vert_btn_block = \"\";\r\n          }\r\n\r\n          tabs_html +=  '<'+span_div+' class=\"btn-group-toggle\" data-toggle=\"buttons\">'+\r\n            '<label id=\"tab_' + survey_obj.tabs + '_button\" class=\"btn show_tab '+active_button+' '+vert_btn_block+'\">'+\r\n              '<input type=\"checkbox\" checked autocomplete=\"off\">'+ this_row['text'] +\r\n            '</label>'+\r\n          '</'+span_div+'>';\r\n\r\n          $(\"#survey_tabs\").html(tabs_html);\r\n\r\n          page_break_indexes = [];\r\n          survey_obj.data.forEach(function(this_row,this_index){\r\n            if(typeof(this_row.type) !== \"undefined\" && this_row.type.toLowerCase() == \"page_start\"){\r\n              page_break_indexes.push(this_index);\r\n            }\r\n          });\r\n\r\n          if(survey_obj.tabs > 0){\r\n            question_td += \"</td><td></td></tr></table></div><div class='survey_page' id='tab_\"+survey_obj.tabs+\"' style='display:none'><table id='table_\"+survey_obj.tabs+\"' class='table_break'><tr>\";\r\n          } else {\r\n            question_td += \"</td><td></td></tr></table><div class='survey_page' id='tab_\"+survey_obj.tabs+\"' ><table id='table_\"+survey_obj.tabs+\"' class='table_break'><tr>\";\r\n          }\r\n        break;\r\n\r\n        case \"checkbox\":\r\n        case \"checkbox_vertical\":\r\n          var options = this_row[\"answers\"].split(\"|\");\r\n          question_td +=  response_html;\r\n          for(var i=0; i<options.length;i++){\r\n            feedback_string = generate_feedback_string(feedback_array,i,feedback_color,row_no,this_row);\r\n            question_td +=  '<div class=\"custom-control custom-checkbox\">'+\r\n                '<input type=\"checkbox\" class=\"custom-control-input '+this_class+' custom-control custom-checkbox '+this_row[\"item_name\"]+'_item row_'+row_no+'\" id=\"'+this_row[\"item_name\"]+ i +'\"  onchange=\"response_check(this)\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+\r\n                '<label class=\"custom-control-label\" for=\"'+this_row[\"item_name\"]+i+'\">'+options[i]+'</label>'+\r\n                feedback_string +\r\n            '</div>';\r\n          }\r\n          break;\r\n\r\n          case \"checkbox_horizontal\":\r\n            feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n            var options = this_row[\"answers\"].split(\"|\");\r\n            question_td += response_html;\r\n            question_td += '<table><tr>';\r\n            for(var i=0; i<options.length;i++){\r\n              question_td +=  '<td>'+\r\n                                '<div class=\"custom-control custom-checkbox\">'+\r\n                                  '<input type=\"checkbox\" class=\"custom-control-input '+this_class+' custom-control custom-checkbox '+this_row[\"item_name\"]+'_item row_'+row_no+'\" id=\"'+this_row[\"item_name\"]+ i +'\"  onchange=\"response_check(this)\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+\r\n                                    '<label class=\"custom-control-label\" for=\"'+this_row[\"item_name\"]+i+'\">'+options[i]+'</label>'+\r\n                                '</div>'+\r\n                              '</td>';\r\n            }\r\n            question_td += '</tr></table>'+feedback_string;\r\n          break;\r\n\r\n          case \"checkbox_single\":\r\n            feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n            var this_option = this_row[\"answers\"];\r\n            question_td +=  response_html +\r\n                            '<div class=\"btn-group-toggle\" data-toggle=\"buttons\">'+\r\n                                '<label class=\"btn btn-outline-primary\">'+\r\n                                    '<input type=\"checkbox\" class=\"'+this_row[\"item_name\"]+'_item row_'+row_no+'\"  checked autocomplete=\"off\" id=\"'+this_row[\"item_name\"]+'\" onchange=\"response_check(this)\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+ this_option +\r\n                                '</label>'+\r\n                            '</div>' + feedback_string;\r\n          break;\r\n\r\n          case \"date\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              question_td+=   response_html+\r\n                              \"<input onchange='response_check(this)' class='custom-control datepicker date \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' type='text' name='survey_\"+this_row['item_name'].toLowerCase()+\"'>\"+\r\n                              feedback_string;\r\n          break;\r\n\r\n          case \"dropdown\":\r\n\t\t\t\t\tcase \"select\":\r\n              feedback_string = generate_feedback_string(feedback_array,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t 0,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t feedback_color,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t row_no,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t this_row);\r\n              var options = this_row[\"answers\"].split(\"|\");\r\n              question_td += response_html +\r\n\t\t\t\t\t\t\t\t'<select ' +\r\n\t\t\t\t\t\t\t\t\t'class=\"custom-select ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'text-primary ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis_row[\"item_name\"] +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'_item row_' + row_no +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'collector_button \"' +\r\n\t\t\t\t\t\t\t\t\t\t'onchange=\"response_check(this)\" ' +\r\n\t\t\t\t\t\t\t\t\t\t'name=\"survey_' + this_row[\"item_name\"].toLowerCase() + '\">' +\r\n\t\t\t\t\t\t\t\t\t\t'<option selected disabled hidden>-- no option selected --</option>';\r\n              for(var i=0; i<options.length;i++){\r\n\t\t\t\t\t\t\t\tquestion_td += \"<option>\" + options[i] + \"</option>\";\r\n              }\r\n              question_td += '</select>' + feedback_string;\r\n          break;\r\n\r\n          case \"email\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              question_td += response_html+\"<input class='form-control type='email' \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' onchange='response_check(this)' type='text' name='survey_\"+this_row['item_name'].toLowerCase()+\"'>\";\r\n              question_td += feedback_string;\r\n          break;\r\n\r\n          case \"google_slide\":\r\n          case \"instruct\":\r\n              //question_td += </td>\"; // \"<span class='text-primary'>\" + this_row[\"text\"] + \"</span>\";\r\n          break;\r\n\r\n          // tidy up this code for nice looking buttons\r\n          case \"likert\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              var options  = this_row[\"answers\"].split(\"|\");\r\n\r\n\t\t\t\t\t\t\tif(typeof(this_row[\"values\"]) == \"undefined\"){\r\n                this_row[\"values\"] = this_row[\"answers\"];\r\n              }\r\n\r\n\t\t\t\t\t\t\tif(typeof(this_row[\"btn_width\"]) !== \"undefined\" && this_row[\"btn-width\"]  !== \"\"){\r\n\t\t\t\t\t\t\t\tvar btn_style = \"width:\" + this_row[\"btn_width\"];\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvar btn_style = \"\";\r\n\t\t\t\t\t\t\t}\r\n\r\n              if(typeof(this_row[\"side_width\"]) !== \"undefined\"){\r\n                var side_width = \"max-width:\" + this_row[\"side_width\"] + \";\" +\r\n                                 \"min-width:\" + this_row[\"side_width\"] + \";\";\r\n              } else {\r\n                var side_width = \"\";\r\n              }\r\n\r\n              var values   = this_row[\"values\"].split(\"|\");\r\n              question_td += \t\"<table class='likert_table'>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"<tr>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"<td style='\" + side_width + \"'>\";\r\n\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t* Add side_text if it exists\r\n\t\t\t\t\t\t\t*/\r\n\r\n\t\t\t\t\t\t\tif(typeof(this_row[\"side_text\"]) !== \"undefined\" &&\r\n\t\t\t\t\t\t\t\tthis_row[\"side_text\"] !== \"\"){\r\n\t\t\t\t\t\t\t\tside_text = this_row[\"side_text\"].split(\"|\");\r\n\t\t\t\t\t\t\t\tside_text = side_text.map(function(this_side){\r\n\t\t\t\t\t\t\t\t\treturn \"<span style='\" + side_width + \" padding:20px;' class='text-primary'><b>\" + this_side + \"</b></span></td><td>\";\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tside_text = [\"\",\"\"];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tquestion_td += side_text[0];\r\n\r\n\t\t\t\t\t\t\tquestion_td +=  response_html +\r\n                              '<div class=\"btn-group btn-group-toggle\" data-toggle=\"buttons\">'; //to help detect blank likert's\r\n\r\n\r\n\t\t\t\t\t\t\tfor(var i=0; i<options.length;i++){\r\n                var this_option = clean_item(options[i]);\r\n                question_td +=  '<button type=\"button\" '+\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'class=\"btn '+\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t 'survey_btn ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t 'btn-outline-primary ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t this_row[\"item_name\"] + '_item row_' + row_no +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t '\"autocomplete=\"off\"' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'id = \"likert_' + row_no + '_' + i + '\" ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'style = \"' + btn_style + '\" ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'onclick=\"likert_update(this,\\''+this_option+'\\',\\''+values[i]+'\\')\">'+\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis_option +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'</button>';\r\n\r\n              }\r\n\t\t\t\t\t\t\tquestion_td +=  \"</div></td><td  style='\" + side_width + \"'>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tside_text[1] +\r\n                              \"<input type='hidden' class='\"+this_class+\"' id='survey_\"+this_row[\"item_name\"].toLowerCase()+\"_score' name='survey_\"+this_row[\"item_name\"].toLowerCase()+\"_score'></td>\"+\r\n                          \"</td>\"+\r\n                      \"</tr>\"+\r\n                  \"</table>\"+feedback_string;\r\n          break;\r\n\r\n          case \"number\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              question_td += response_html +\"<input type='number'  onchange='response_check(this)' class='form-control \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' name='survey_\"+this_row['item_name'].toLowerCase()+\"'>\" + feedback_string;\r\n          break;\r\n\r\n          case \"para\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              question_td += response_html+\"<textarea name='survey_\"+this_row['item_name'].toLowerCase()+\"' class='\"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' onchange='response_check(this)' style='width:100%;height:200px'></textarea>\";\r\n              question_td += feedback_string;\r\n          break;\r\n\r\n          case \"radio\":\r\n          case \"radio_vertical\":\r\n            var options = this_row[\"answers\"].split(\"|\");\r\n            var values   = this_row[\"values\"].split(\"|\");\r\n            question_td +=  response_html;\r\n            for(var i=0; i<options.length;i++){\r\n              feedback_string = generate_feedback_string(feedback_array,i,feedback_color,row_no,this_row);\r\n\r\n              question_td +=  '<div class=\"custom-control custom-radio\">'+\r\n                                '<input type=\"radio\" class=\"custom-control-input '+this_class+'  onclick=\"likert_update(this,\\''+options[i]+'\\',\\''+values[i]+'\\')\" custom-control custom-radio '+this_row[\"item_name\"]+'_item row_'+row_no+'\" id=\"'+this_row[\"item_name\"]+ i +'\"  onchange=\"response_check(this)\" value=\"' + options[i] + '\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+\r\n                                '<label class=\"custom-control-label\" for=\"'+this_row[\"item_name\"]+i+'\">'+options[i]+'</label>'+\r\n                                  feedback_string +\r\n                              '</div>';\r\n\r\n\r\n            }\r\n            question_td +=  \"<input type='hidden' class='\"+this_class+\"' id='survey_\"+this_row[\"item_name\"].toLowerCase()+\"_score' name='survey_\"+this_row[\"item_name\"].toLowerCase()+\"_score'>\";\r\n          break;\r\n\r\n          case \"radio_horizontal\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              var options = this_row[\"answers\"].split(\"|\");\r\n              question_td +=  response_html;\r\n              for(var i=0; i<options.length;i++){\r\n                  question_td +=  '<div class=\"custom-control custom-radio custom-control-inline\">'+\r\n                                      '<input type=\"radio\" class=\"custom-control-input '+this_class+' custom-control custom-radio '+this_row[\"item_name\"]+'_item row_'+row_no+'\" id=\"'+this_row[\"item_name\"]+ i +'\"  onchange=\"response_check(this)\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+\r\n                                      '<label class=\"custom-control-label\" for=\"'+this_row[\"item_name\"]+i+'\">'+options[i]+'</label>'+\r\n                                      '<div class=\"invalid-feedback\">Example invalid feedback text</div>'+\r\n                                  '</div>'\r\n              }\r\n              question_td += feedback_string;\r\n          break;\r\n\r\n          case \"report_score\":\r\n              question_td += \"<input disabled class='form-control score_\" + this_row[\"item_name\"] + \" \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' type='text' name='survey_\"+this_row['item_name'].toLowerCase()+\"'>\";\r\n          break;\r\n\r\n          case \"text\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              question_td += response_html+\"<input class='form-control \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' onchange='response_check(this)' type='text' name='survey_\"+this_row['item_name'].toLowerCase()+\"'>\";\r\n              question_td += feedback_string;\r\n          break;\r\n\r\n      }\r\n    }\r\n    if(feedback_array){\r\n        question_td += \"<button class='btn btn-outline-info feedback_btn \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' data-toggle='tooltip' id='reveal_\"+this_row[\"item_name\"].toLowerCase()+\"_feedback'  onclick='reveal_answers(this)'>Show</button>\";\r\n    }\r\n  }\r\n//  question_td += '</td>';\r\n\r\n  if(typeof(this_row[\"type\"])== \"undefined\"){\r\n      return '';\r\n  } else {\r\n    if(this_row[\"type\"].toLowerCase() == \"instruct\"){\r\n      var this_row_html = \"<td colspan='2'>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis_row[\"text\"] +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"</td>\";\r\n\t\t} else if(this_row[\"type\"].toLowerCase() == \"likert\"){\r\n\r\n\t\t\tif(typeof(this_row[\"side_by_side\"]) !== \"undefined\" &&\r\n\t\t\t\t this_row[\"side_by_side\"].toLowerCase() == \"yes\"){\r\n\r\n\t\t\t\tvar this_row_html=\"<td class='text-primary' id='survey_\"+this_row[\"item_name\"].toLowerCase().replace(\" \",\"_\")+\"_question' style='width:\"+row_ques_perc+\"; text-align:right'>\"+this_row[\"text\"]+\"</td><td>\"+question_td+\"</label></td>\";\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar this_row_html = \"<tr>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"<td colspan='2'>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis_row[\"text\"] +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"</td>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"</tr>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"<tr>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"<td colspan='2' align='center'>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tquestion_td +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"</td>\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"</tr>\";\r\n\r\n\t\t\t}\r\n\r\n\r\n    } else if(this_row[\"type\"].toLowerCase()==\"google_slide\") {\r\n      var this_row_html=\"<td colspan='2'>\"+this_row[\"text\"]+\"</label></td>\";\r\n    } else if(typeof(this_row[\"no_text\"]) !== \"undefined\" && this_row[\"no_text\"] == \"on\"){\r\n      var this_row_html=\"<td colspan='2'>\"+question_td+\"</td>\";\r\n    } else {\r\n      if(this_row['text'].toLowerCase() == \"page_start\" | this_row['type'].toLowerCase() == \"page_start\"){\r\n        this_row_html = question_td;\r\n      }else {\r\n        var this_row_html=\"<td class='text-primary' id='survey_\"+this_row[\"item_name\"].toLowerCase().replace(\" \",\"_\")+\"_question' style='width:\"+row_ques_perc+\"; text-align:right'>\"+this_row[\"text\"]+\"</td><td>\"+question_td+\"</label></td>\";\r\n      }\r\n    }\r\n    if(typeof(this_row[\"optional\"]) !== \"undefined\"){\r\n      if(this_row[\"optional\"].toLowerCase() == \"no\"){\r\n        proceed_object.name.push(this_row[\"item_name\"]);\r\n        proceed_object.type.push(this_row[\"type\"]);\r\n        proceed_object.break_no.push(page_break_management.breaks_remaining);\r\n      }\r\n    }\r\n    if(typeof(this_row[\"shuffle\"]) == \"undefined\" || this_row[\"shuffle\"].toLowerCase() == \"off\"){\r\n      this_shuffle='none';\r\n    } else {\r\n      this_shuffle=this_row[\"shuffle\"];\r\n    }\r\n    return [this_row_html,this_shuffle];\r\n  }\r\n}\r\n\r\nfunction quest_resp_perc(quest_resp_rat){\r\n\tif(typeof(quest_resp_rat) == \"undefined\"){\r\n    row_resp_perc = \"50%\";\r\n    row_ques_perc = \"50%\";\r\n  } else {\r\n    row_resp_perc = parseFloat(100-quest_resp_rat.replace(\"%\",\"\"))+\"%\";\r\n    row_ques_perc = parseFloat(quest_resp_rat.replace(\"%\",\"\"))+\"%\";\r\n  }\r\n  return [row_ques_perc,row_resp_perc];\r\n}\r\n\r\nfunction response_check(submitted_element){\r\n  console.dir(\"submitted_element\");\r\n  console.dir(submitted_element);\r\n  switch(submitted_element.type){\r\n    case \"checkbox\":\r\n      var checked_responses = $(\"[name='\"+submitted_element.name+\"']:checked\");\r\n      if(checked_responses.length){ //i.e. more than 0\r\n        var values = [];\r\n        for(var i = 0; i < checked_responses.length; i++){\r\n          values.push(checked_responses[i].value);\r\n        }\r\n        $(\"#\"+submitted_element.name+\"_response\").val(JSON.stringify(values));\r\n      } else {\r\n        $(\"#\"+submitted_element.name+\"_response\").val(\"\");\r\n      }\r\n      break;\r\n\r\n      case \"button\":\r\n        $(\"#\"+submitted_element.name+\"_response\").val(submitted_element.innerHTML);\r\n      break;\r\n\r\n      case \"number\":\r\n      case \"select-one\":\r\n      case \"text\":\r\n      case \"textarea\":\r\n        $(\"#\"+submitted_element.name+\"_response\").val(submitted_element.value);\r\n      break;\r\n\r\n\r\n      case \"radio\":\r\n        $(\"#\"+submitted_element.name+\"_response\").val(submitted_element.value);\r\n      break;\r\n    }\r\n    update_score();\r\n}\r\n\r\nfunction retrieve_feedback(this_row){\r\n  if(typeof(this_row[\"feedback\"]) !== \"undefined\" && this_row[\"feedback\"] !== \"\"){\r\n    feedback_array = this_row[\"feedback\"].split(\"|\");\r\n    if(typeof(this_row[\"feedback_color\"]) == \"undefined\"){\r\n      bootbox.alert(\"The color for the feedback options has not been set. If you created this questionnaire, please add a column 'feedback_color' to your survey and separate the colors by a pipe (|) character.\");\r\n    }\r\n    feedback_color = this_row[\"feedback_color\"].split(\"|\");\r\n  } else {\r\n    feedback_array = null;\r\n    feedback_color = '';\r\n  }\r\n  return [feedback_array,feedback_color];\r\n}\r\n\r\nfunction retrieve_row_no_item_name(this_element){\r\n  var these_classes = this_element.className.split(\" \");\r\n  var row_no;\r\n  var item_name;\r\n  these_classes.forEach(function(this_class){\r\n    if (this_class.indexOf('row_') > -1) {\r\n      row_no = this_class.replace(\"row_\",\"\");\r\n    }\r\n    if (this_class.indexOf('_item') > -1) {\r\n      item_name = this_class.replace(\"_item\",\"\").toLowerCase();\r\n    }\r\n  });\r\n  return [row_no,item_name];\r\n}\r\n\r\nfunction reveal_answers(this_element){\r\n  var this_response = $(\"#\"+this_element.id.replace(\"reveal_\",\"survey_\").replace(\"_feedback\",\"_response\")).val();\r\n  response_present = this_response == \"\" ? false : true;\r\n\r\n  if(settings.feedback_before_response == false && response_present == false){\r\n    bootbox.alert(\"Please respond before trying reveal the feedback.\")\r\n  } else {\r\n    if($(\"#\"+this_element.id).hasClass(\"btn-outline-info\")){\r\n      $(\".\"+this_element.id.replace(\"reveal_\",\"\")).show(500);\r\n      if(settings.lock_after_feedback){\r\n        var item_class = this_element.id.replace(\"_feedback\",\"_item\").replace(\"reveal_\",\"\");\r\n        $(\".\"+item_class).prop(\"disabled\",true);\r\n        document.getElementsByClassName(item_class).title = \"The person creating this content has set it so that your answers are locked in once you have chosen to see the feedback\";\r\n        $(\"#\"+this_element.id).addClass(\"btn-info\");\r\n        $(\"#\"+this_element.id).removeClass(\"btn-outline-info\");\r\n        $(\"#\"+this_element.id).html(\"Locked\");\r\n        document.getElementById(this_element.id).title = 'The person creating this content has set it so that your answers are locked in once you have chosen to see the feedback';\r\n        $(\"#\"+this_element.id).addClass(\"disabled\");\r\n      } else {\r\n        $(\"#\"+this_element.id).html(\"Hide\");\r\n        $(\"#\"+this_element.id).removeClass(\"btn-outline-info\");\r\n        $(\"#\"+this_element.id).addClass(\"btn-info\");\r\n      }\r\n    } else {\r\n      $(\"#\"+this_element.id).html(\"Show\");\r\n      $(\".\"+this_element.id.replace(\"reveal_\",\"\")).hide(500);\r\n      $(\"#\"+this_element.id).addClass(\"btn-outline-info\");\r\n      $(\"#\"+this_element.id).removeClass(\"btn-info\");\r\n    }\r\n  }\r\n}\r\n\r\nfunction shuffle(array) {                                   // http://stackoverflow.com/questions/962802#962890\r\n  var tmp, current, top = array.length;\r\n  if(top) while(--top) {\r\n    current = Math.floor(Math.random() * (top + 1));\r\n    tmp = array[current];\r\n    array[current] = array[top];\r\n    array[top] = tmp;\r\n  }\r\n  return array;\r\n}\r\n\r\nfunction update_score(){\r\n  var scales = Object.keys(survey_obj.scales);\r\n  scales.forEach(function(scale){\r\n    this_scale = survey_obj.scales[scale];\r\n    var questions = Object.keys(this_scale.questions);\r\n    var this_score = 0;\r\n    complete_score = true;\r\n\r\n    questions.forEach(function(row_no){\r\n      var item = survey_obj.data[row_no].item_name.toLowerCase();\r\n      var this_response = $(\"#survey_\"+item+\"_response\").val(); //response\r\n      var normal_reverse = this_scale.questions[row_no];\r\n\r\n      if(normal_reverse.indexOf(\"-\") == -1){\r\n        var multiplier = parseFloat(normal_reverse.replace(\"r\",\"\"));\r\n        if(normal_reverse.indexOf(\"r\") == 0){ //reverse the values\r\n          this_value = process_item_score(survey_obj,row_no,\"values\",this_response,item,\"r\");\r\n        } else {\r\n          this_value = process_item_score(survey_obj,row_no,\"values\",this_response,item);\r\n        }\r\n      } else {\r\n        values_reverse = normal_reverse.split(\"-\");\r\n        values_col     = values_reverse[0].toLowerCase();\r\n        normal_reverse = values_reverse[1];\r\n        var multiplier = parseFloat(normal_reverse.replace(\"r\",\"\"));\r\n\r\n        if(normal_reverse.indexOf(\"r\") == 0){ //reverse the values\r\n          this_value = process_item_score(survey_obj,row_no,values_col,this_response,item,\"r\");\r\n        } else {\r\n          this_value = process_item_score(survey_obj,row_no,values_col,this_response,item);\r\n        }\r\n      }\r\n      if(typeof(this_value) !== \"undefined\"){\r\n        this_score += multiplier * this_value;\r\n      } else {\r\n        complete_score = false;\r\n      }\r\n    });\r\n    if(complete_score){\r\n      $(\".score_\"+scale).addClass(\"bg-success\");\r\n      $(\".score_\"+scale).removeClass(\"bg-danger\");\r\n      $(\".score_\"+scale).addClass(\"text-light\");\r\n      document.getElementsByClassName(\"score_\"+scale).title = 'All relevant questions have been answered';\r\n    } else {\r\n      $(\".score_\"+scale).removeClass(\"text-success\");\r\n      $(\".score_\"+scale).addClass(\"bg-danger\");\r\n      $(\".score_\"+scale).addClass(\"text-light\");\r\n      document.getElementsByClassName(\"score_\"+scale).title = 'At least one relevant questions has NOT been answered';\r\n    }\r\n    $(\".score_\"+scale).val(this_score);\r\n  });\r\n}\r\n\r\nfunction write_survey(this_survey,this_id){\r\n  scoring_object.update_scales(this_survey);\r\n  this_survey_html = \"<table class='table_break' id='table0'>\";\r\n  this_survey_object={\r\n    content:[],\r\n    shuffle:[],\r\n    content_new_order:[],\r\n    shuffled_content:[],\r\n    shuffled_arrays:{},\r\n  }\r\n\r\n  this_survey_html += \"<tr>\";\r\n  for(i = 0; i < this_survey.length; i++){\r\n    this_row = this_survey[i];\r\n    row_html = process_survey_question(this_row,i);\r\n\t\tthis_survey_object.content.push(row_html[0]);\r\n    this_survey_object.shuffle.push(row_html[1]);\r\n\t}\r\n\r\n\tunique_shuffles = this_survey_object.shuffle.filter((v,i,a)=>a.indexOf(v)==i); //by Camilo Martin on https://stackoverflow.com/questions/1960473/unique-values-in-an-array\r\n\r\n\tfor(var i=0;i<unique_shuffles.length;i++){\r\n    if(typeof(unique_shuffles[i]) !== \"undefined\" &&\r\n      unique_shuffles[i] !== \"none\" &&\r\n      unique_shuffles[i] !== \"\"){\r\n        shuffled_content = this_survey_object.shuffle.map(function(element,index){\r\n    \t   if(typeof(element)!== \"undefined\" && element.toLowerCase() !== \"none\" && element.toLowerCase() == unique_shuffles[i]){\r\n  \t       return this_survey_object.content[index];\r\n    \t   }\r\n    \t}).filter(elm => typeof(elm) !== \"undefined\");\r\n    \tnew_order = shuffle(shuffled_content);\r\n    \tthis_survey_object.shuffled_arrays[unique_shuffles[i]]=new_order; // add new array with dynamic name\r\n    }\r\n\t}\r\n\r\n\t// loop through lists, taking one off from the shuffled list and replacing the row with one from the shuffled list\r\n\tfor(var i=0;i<this_survey_object.content.length;i++){\r\n    var this_index = Object.keys(this_survey_object.shuffled_arrays).indexOf(this_survey_object.shuffle[i]);\r\n    if(this_index !== -1){\r\n      //take first item off relevant list and delete item\r\n      var this_item = this_survey_object.shuffled_arrays[Object.keys(this_survey_object.shuffled_arrays)[this_index]].shift();\r\n      this_survey_object.content_new_order[i]=this_item;\r\n    } else {\r\n      this_survey_object.content_new_order[i]=this_survey_object.content[i];\r\n    }\r\n\t}\r\n\r\n\tquestions_in_order = this_survey_object.content_new_order.join(\"</tr><tr>\");\r\n\tquestions_in_order += \"</tr>\";\r\n\r\n\tthis_survey_html += questions_in_order;\r\n\tthis_survey_html += \"</table>\";\r\n\r\n\t$(\"#\" + this_id).html(this_survey_html);\r\n\r\n\t$(\"#\" + this_id).show(1000,function(){\r\n\t\t// Set all buttons to the max width\r\n\t\t/*\r\n\t\tvar maxWidth = 0;\r\n\t\t$('.btn').each(function(index, element) {\r\n\t\t\tvar curWidth = $(element).width();\r\n\t\t\tif (maxWidth < curWidth ) {\r\n\t\t\t\tmaxWidth = curWidth;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$('.survey_btn').each(function(i) {\r\n\t\t\t$(this).delay(200).animate({\r\n\t\t\t\t\"width\" : maxWidth\r\n\t\t\t});\r\n\t\t});\r\n\t\t*/\r\n\t});\r\n\r\n\t//scroll to top\r\n\r\n\r\n\t$(\".show_tab\").on(\"click\",function(){\r\n    if(this.className.indexOf(\"disabled\") == -1){\r\n      $(\".show_tab\").removeClass(\"active\");\r\n      $(\".survey_page\").hide();\r\n      $(\"#\"+this.id.replace(\"_button\",\"\")).show();\r\n    } else {\r\n      bootbox.alert(\"You have not yet unlocked this tab - maybe try clicking on <b>Proceed</b>?\");\r\n    }\r\n\t});\r\n  $('[data-toggle=\"tooltip\"]').tooltip();\r\n  $(\".custom-checkbox\").prop(\"indeterminate\",true);\r\n}\r\n\r\n//////////////////\r\n// Load survey  //\r\n//////////////////\r\ncurrent_survey = \"{{survey}}\";\r\nif(typeof(Trial) !== \"undefined\"){  // This check is to help this code work when previewing trialtypes\r\n  Trial.set_timer(function(){       // This chunk is for when the survey is run within an actual trial\r\n    load_survey(current_survey);\r\n  },100);\r\n} else {                            // This chunk is for when the survey is being previewed in the \"survey editor\"\r\n  load_survey(current_survey);\r\n}\r\n\r\n\r\n</script>\r\n",
      "instruct_keyboard": "<!--\r\n/*  Collector (Garcia, Kornell, Kerr, Blake & Haffey)\r\n    A program for running experiments on the web\r\n    Copyright 2012-2016 Mikey Garcia & Nate Kornell\r\n\r\n\r\n    This program is free software: you can redistribute it and/or modify\r\n    it under the terms of the GNU General Public License version 3 as published by\r\n    the Free Software Foundation.\r\n\r\n    This program is distributed in the hope that it will be useful,\r\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n    GNU General Public License for more details.\r\n\r\n    You should have received a copy of the GNU General Public License\r\n    along with this program.  If not, see <http://www.gnu.org/licenses/>\r\n \t\t\r\n\t\tKitten/Cat release (2019-21) author: Dr. Anthony Haffey (team@someopen.solutions)\r\n*/\r\n-->\r\n<style>\r\n#instruct_text{\r\n  margin:auto;\r\n  width:500px;\r\n  padding:50px;\r\n  max-height:600px;\r\n  text-align: center;  \r\n}\r\n#trial_contents{\r\n  position: absolute;\r\n  top:0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  margin:auto;\r\n  width:600;\r\n  height:600;\r\n}\r\n* {\r\ncursor: none;\r\n}\r\n</style>\r\n<div id=\"trial_contents\">\r\n  <div id=\"instruct_text\">{{text}}</div>\r\n</div>\r\n\r\n<script>\r\n$(window).bind('keydown', function(event) {\r\n  Trial.submit();\r\n});\r\n</script>",
      "instruct": "<!--\n/*  Collector (Garcia, Kornell, Kerr, Blake & Haffey)\n    A program for running experiments on the web\n    Copyright 2012-2016 Mikey Garcia & Nate Kornell\n\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License version 3 as published by\n    the Free Software Foundation.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>\n \t\t\n\t\tKitten/Cat release (2019-2021) author: Dr. Anthony Haffey (team@someopen.solutions)\t\t\n*/\n-->\n<style>\n#instruct_text{\n  margin:auto;\n  width:500px;\n  padding:50px;\n  max-height:600px;\n  text-align: center;  \n}\n#proceed_button{\n  position:absolute;\n  right: 20px;\n}\n#trial_contents{\n  position: absolute;\n  top:0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin:auto;\n  width:600;\n  height:600;\n}\n</style>\n<div id=\"trial_contents\">\n  <div id=\"instruct_text\">{{text}}</div>\n  <div>\n    <button class=\"btn btn-primary\" id=\"proceed_button\" onclick=\"Trial.submit()\">Proceed</button>\n  </div>\n</div>"
    },
    "trialtype": "",
    "filetype": "",
    "version": 0,
    "user_trialtypes": {},
    "graphic": {
      "trialtype": "",
      "trialtypes": {},
      "hovered_element": "",
      "relevant_styles": [
        "background-color",
        "border-color",
        "border-radius",
        "border-style",
        "border-width",
        "color",
        "font-size",
        "height",
        "left",
        "top",
        "width",
        "z-index"
      ]
    }
  },
  "autoloaded_mods": {},
  "keys": {
    "archived": [],
    "public_key": "FOWeCnfqibjH6ZDnuehL0GGv2dS9JnghHkBBaV1W8k0=",
    "encrypted_private_key": "U2FsdGVkX19NPVhARqInBjHQ41SIyq4iqErfoV9bsHaVFs1/rRh3JBbXy5EWSaeX/P9UCIabgF00NPRTaNGF7A=="
  },
  "pathway_mgmt": {
    "pathways": {}
  }
}